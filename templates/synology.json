{
  "id": "synology",
  "version": "1.0",
  "display_name": "Synology NAS",
  "icon": "üñ¥",
  "description": "Backup auf Synology DiskStation via SMB/CIFS",
  "category": "nas",
  "storage_type": "smb",
  "handler": "synology_handler",
  "platforms": [
    "windows",
    "linux",
    "darwin"
  ],
  "ui_fields": [
    {
      "name": "host",
      "type": "text",
      "label": "Synology IP/Hostname",
      "placeholder": "192.168.1.100 oder nas.local",
      "required": true,
      "validation": "^[a-zA-Z0-9.-]+$",
      "help": "IP-Adresse oder Hostname deiner Synology"
    },
    {
      "name": "share",
      "type": "combo",
      "label": "Freigabe",
      "editable": true,
      "placeholder": "backups",
      "required": true,
      "dynamic_options": "scan_shares",
      "help": "SMB-Freigabe auf der Synology"
    },
    {
      "name": "scan_button",
      "type": "button",
      "label": "Freigaben scannen",
      "action": "scan_shares",
      "icon": "üîç",
      "help": "Scannt verf√ºgbare Freigaben"
    },
    {
      "name": "user",
      "type": "text",
      "label": "Benutzername",
      "required": true,
      "help": "Synology-Benutzername"
    },
    {
      "name": "password",
      "type": "password",
      "label": "Passwort",
      "required": true,
      "store": "keyring",
      "help": "Synology-Passwort (wird sicher gespeichert)"
    },
    {
      "name": "path",
      "type": "text",
      "label": "Unterordner",
      "placeholder": "/scrat-backups",
      "default": "/scrat-backups",
      "required": false,
      "help": "Optionaler Unterordner auf der Freigabe"
    },
    {
      "name": "test_button",
      "type": "button",
      "label": "Verbindung testen",
      "action": "test_connection",
      "icon": "‚úÖ",
      "style": "success",
      "help": "Testet SMB-Verbindung"
    }
  ],
  "config_mapping": {
    "type": "smb",
    "server": "${host}",
    "port": 445,
    "share": "${share}",
    "user": "${user}",
    "password": "${password}",
    "path": "${path}",
    "name": "Synology-Backup (${host})"
  },
  "availability_check": {
    "type": "dependency",
    "dependencies": [
      {
        "name": "smbclient",
        "platform_specific": {
          "linux": {
            "check": "which smbclient",
            "install": "sudo apt install smbclient"
          },
          "windows": {
            "check": "builtin",
            "install": null
          }
        }
      }
    ]
  }
}
